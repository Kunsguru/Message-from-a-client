<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us</title>
    <style>
        /* Your existing CSS */
    </style>
</head>
<body>
    <h1>Contact Us</h1>
    <form id="contactForm">
        <input type="hidden" name="contact_number" value="697483">
        <label for="user_name">Name:</label>
        <input type="text" id="user_name" name="user_name" required>
        <label for="user_email">Email:</label>
        <input type="email" id="user_email" name="user_email" required>
        <label for="phone">Phone:</label>
        <input type="tel" id="phone" name="phone" required>
        <label for="message">Message:</label>
        <textarea id="message" name="message" required></textarea>
        <button type="submit">Submit</button>
        <button type="button" id="viewMessagesButton">View Messages</button>
        <button type="button" class="home-button" id="homeButton">Home</button>
    </form>

    <div id="messagesOverlay" class="overlay">
        <div class="overlay-content">
            <h2>Messages</h2>
            <ul id="messagesList"></ul>
            <button class="close-button" id="closeMessagesOverlayButton">Close</button>
        </div>
    </div>

    <script>
        const adminPassword = '1234'; // Set your admin password here

        async function submitForm(event) {
            event.preventDefault();
            const name = document.getElementById('user_name').value;
            const email = document.getElementById('user_email').value;
            const phone = document.getElementById('phone').value;
            const message = document.getElementById('message').value;

            const messageData = { name, email, phone, message };

            try {
                const response = await fetch('https://<your-backend-url>/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(messageData)
                });
                const data = await response.json();
                alert('Message submitted successfully!');
                document.getElementById('contactForm').reset();
            } catch (error) {
                console.error('Error submitting form:', error);
                alert('Failed to submit message.');
            }
        }

        async function fetchMessages() {
            try {
                const response = await fetch('https://<your-backend-url>/messages');
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching messages:', error);
                return [];
            }
        }

        function displayMessage(message, index) {
            const messagesList = document.getElementById('messagesList');
            const listItem = document.createElement('li');
            listItem.innerHTML = `<span>Name: ${message.name}, Email: ${message.email}, Phone: ${message.phone}, Message: ${message.message}</span>`;
            messagesList.appendChild(listItem);
        }

        async function displayAllMessages() {
            const messages = await fetchMessages();
            const messagesList = document.getElementById('messagesList');
            messagesList.innerHTML = ''; // Clear previous entries
            messages.forEach(displayMessage);
        }

        document.getElementById('contactForm').addEventListener('submit', submitForm);

        document.getElementById('viewMessagesButton').addEventListener('click', async function() {
            const password = prompt('Enter the admin password:');
            if (password === adminPassword) {
                await displayAllMessages();
                document.getElementById('messagesOverlay').style.display = 'flex';
            } else {
                alert('Incorrect password. Access denied.');
            }
        });

        document.getElementById('closeMessagesOverlayButton').addEventListener('click', function() {
            document.getElementById('messagesOverlay').style.display = 'none';
        });

        document.getElementById('homeButton').addEventListener('click', function() {
            window.location.href = 'https://artswithartsybasy01.onrender.com/'; // Adjust the URL to the correct path for your home page
        });
    </script>
</body>
</html>
